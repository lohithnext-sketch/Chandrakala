<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Tribute to Our Guardian Angel | Chandrakala Garu</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&family=Great+Vibes&family=Lora:ital@1&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --apgb-green: #004d00; 
            --apgb-accent: #2e8b57;
            --gold: #FFD700;
            --gold-glow: #ffeb3b;
            --white: #ffffff;
            --glass: rgba(255, 255, 255, 0.95);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html {
            font-family: 'Poppins', sans-serif;
            background: #021a02;
            color: #333;
            width: 100%; height: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* --- BACKGROUND FIREFLIES --- */
        #firefly-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(circle at bottom, #0a290a 0%, #000 100%);
        }

        /* --- LOGIN SCREEN --- */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #003300 0%, #000 100%);
            display: flex; justify-content: center; align-items: center;
            z-index: 10000;
            transition: opacity 1s ease-out;
            padding: 20px; /* Prevent edge touching on mobile */
        }

        .login-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px); /* For iOS */
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 40px 20px; border-radius: 25px;
            text-align: center; width: 100%; max-width: 400px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            color: white;
            animation: breathe 4s infinite ease-in-out;
        }
        @keyframes breathe { 0%, 100% { box-shadow: 0 0 30px rgba(0,0,0,0.5); } 50% { box-shadow: 0 0 60px rgba(255, 215, 0, 0.2); } }

        .login-card h2 { font-family: 'Cinzel', serif; color: var(--gold); font-size: 1.8rem; margin-bottom: 20px; line-height: 1.3; }
        
        input {
            width: 100%; padding: 15px; border-radius: 50px; 
            border: 2px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.3); 
            color: var(--gold); font-size: 16px; /* Prevents iOS Zoom */
            text-align: center; outline: none;
            margin-bottom: 25px; font-family: 'Cinzel';
        }
        input:focus { border-color: var(--gold); background: rgba(0,0,0,0.6); }

        .login-btn {
            background: linear-gradient(45deg, var(--gold), #daa520);
            color: #003300; padding: 15px 30px; font-weight: bold; border-radius: 50px;
            border: none; cursor: pointer; font-size: 1.1rem; width: 100%;
            text-transform: uppercase; box-shadow: 0 5px 20px rgba(255,215,0,0.3);
        }

        /* --- MAIN CONTENT --- */
        #main-content { display: none; opacity: 0; transition: opacity 1.5s ease; }

        header {
            min-height: 100vh;
            background: linear-gradient(to bottom, rgba(0, 20, 0, 0.6), rgba(0,0,0,0.8)), 
                        url('https://images.unsplash.com/photo-1518173946687-a4c8892bbd9f?auto=format&fit=crop&q=80');
            background-size: cover; background-position: center; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; color: white; padding: 20px;
        }

        /* Mobile Responsive Typography */
        .hero-title {
            font-family: 'Cinzel', serif; 
            font-size: clamp(2.2rem, 10vw, 5rem);
            background: linear-gradient(to right, #fff, var(--gold), #fff);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            font-weight: 900; filter: drop-shadow(0 0 10px rgba(255,215,0,0.6));
            margin-bottom: 10px; line-height: 1.2;
        }

        .hero-subtitle { font-family: 'Great Vibes', cursive; font-size: clamp(1.8rem, 6vw, 3.5rem); color: #fff; margin-bottom: 25px; }

        .badge-text {
            border: 2px solid var(--gold); padding: 8px 20px; border-radius: 50px; 
            margin-bottom: 15px; color: var(--gold); letter-spacing: 1px; 
            background: rgba(0,0,0,0.4); font-size: 0.8rem; font-weight: bold;
        }

        /* --- DYNAMIC SCROLL INDICATOR --- */
        .scroll-hint {
            position: absolute; bottom: 80px; /* Higher up for mobile nav bars */
            left: 50%; transform: translateX(-50%);
            text-align: center; cursor: pointer; z-index: 10;
            opacity: 0; animation: fadeIn 2s 1s forwards;
            display: flex; flex-direction: column; align-items: center;
        }
        
        .scroll-text {
            font-family: 'Cinzel', serif; font-size: 0.8rem; color: rgba(255,255,255,0.9);
            letter-spacing: 2px; margin-bottom: 10px; font-weight: bold;
            text-shadow: 0 0 5px rgba(0,0,0,1);
        }

        .scroll-icon-wrapper {
            width: 45px; height: 45px; border-radius: 50%;
            border: 2px solid var(--gold);
            display: flex; justify-content: center; align-items: center;
            position: relative;
        }

        .scroll-arrow { font-size: 1.2rem; color: #fff; animation: bounce 2s infinite; }

        .scroll-icon-wrapper::before { 
            content: ''; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); border-radius: 50%;
            border: 2px solid var(--gold); width: 45px; height: 45px;
            animation: ripple 2s infinite; 
        }

        @keyframes ripple { 0% { width: 45px; height: 45px; opacity: 1; border-width: 2px; } 100% { width: 90px; height: 90px; opacity: 0; border-width: 0px; } }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(10px);} 60% {transform: translateY(5px);} }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- EMOTIONAL TIMELINE SECTION --- */
        .tribute-section { padding: 60px 20px; max-width: 900px; margin: 0 auto; }
        
        .section-title {
            text-align: center; color: var(--gold); font-family: 'Cinzel'; 
            font-size: clamp(2rem, 5vw, 2.5rem);
            margin-bottom: 40px; text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .memory-card {
            background: var(--glass);
            border-left: 5px solid var(--gold);
            padding: 30px 20px; /* Reduced padding for mobile */
            border-radius: 15px 5px 15px 5px;
            margin-bottom: 40px; position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            opacity: 0; transform: translateY(50px);
            transition: all 0.8s ease;
        }
        
        .memory-card.active { opacity: 1; transform: translateY(0); }
        .memory-card::before {
            content: '‚ù§Ô∏è'; position: absolute; left: -15px; top: -15px; /* Moved to corner for mobile */
            width: 35px; height: 35px; background: var(--gold); border-radius: 50%;
            display: flex; justify-content: center; align-items: center; font-size: 1rem;
            box-shadow: 0 0 15px var(--gold); border: 2px solid #fff;
        }

        .memory-title { font-family: 'Cinzel'; color: var(--apgb-green); font-size: 1.3rem; margin-bottom: 10px; font-weight: bold; line-height: 1.4; }
        .memory-text { font-family: 'Lora', serif; font-size: 1.05rem; line-height: 1.6; color: #444; text-align: justify; }

        .card-childhood { border-left-color: #ff69b4; }
        .card-childhood::before { background: #ff69b4; content: 'üé°'; }
        
        .card-parents { border-left-color: var(--apgb-green); }
        .card-parents::before { background: var(--apgb-green); content: 'üïØÔ∏è'; }

        .card-soul { border-left-color: var(--gold); background: linear-gradient(135deg, #fff, #fffbec); }
        .card-soul::before { background: var(--gold); content: 'üëë'; }

        /* --- GIFT SECTION & DYNAMIC BUTTON --- */
        .final-wish-section {
            background: linear-gradient(to bottom, #f4f7f6, #fff);
            padding: 80px 20px 120px 20px; /* Extra bottom padding for floating flower */
            text-align: center;
        }

        .gift-btn {
            background: var(--apgb-green); color: var(--gold);
            font-size: 1.3rem; padding: 20px 40px; border-radius: 60px;
            border: 3px solid var(--gold); cursor: pointer; display: inline-block;
            font-family: 'Cinzel'; position: relative; overflow: hidden;
            box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7);
            animation: heartbeat 1.5s infinite;
            transition: all 0.3s ease;
            width: 100%; max-width: 300px; /* Full width on mobile but capped */
        }

        @keyframes heartbeat {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            70% { transform: scale(1.03); box-shadow: 0 0 0 15px rgba(255, 215, 0, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }

        .gift-btn::before {
            content: ''; position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            animation: shine 3s infinite;
        }
        @keyframes shine { 100% { left: 200%; } }

        .gift-btn:hover { background: #003300; animation-play-state: paused; transform: scale(1.05); }

        .message-box {
            display: none; background: white; padding: 30px 20px; border-radius: 20px;
            max-width: 800px; margin: 40px auto; border: 1px solid var(--gold);
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            animation: fadeInUp 1s forwards;
        }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- FOOTER & FLOWER --- */
        footer { background: #000; color: #666; padding: 40px 20px; text-align: center; font-size: 0.9rem; }

        .floating-flower {
            position: fixed; bottom: 20px; right: 20px; font-size: 3.5rem; z-index: 99;
            cursor: pointer; filter: drop-shadow(0 0 10px var(--gold));
            animation: float 4s ease-in-out infinite;
            background: rgba(0,0,0,0.3); border-radius: 50%; /* Added bg for visibility */
            width: 70px; height: 70px; display: flex; justify-content: center; align-items: center;
            border: 1px solid rgba(255,215,0,0.3);
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Utility */
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-10px);} 75% {transform: translateX(10px);} }
        
        /* Mobile specific adjustments */
        @media (max-width: 600px) {
            .hero-title { font-size: 2.8rem; }
            .login-card { padding: 30px 20px; width: 95%; }
            .memory-card::before { left: 50%; top: -20px; transform: translateX(-50%); } /* Center icon on top for mobile */
        }
    </style>
</head>
<body>

    <canvas id="firefly-canvas"></canvas>

    <div id="login-screen">
        <div class="login-card" id="loginCard">
            <div style="font-size: 3rem; margin-bottom: 10px;">üå∫</div>
            <h2>Family Login</h2>
            <p style="opacity: 0.8; font-size: 0.9rem; margin-bottom: 20px;">FOR OUR BELOVED DODAMMA</p>
            <input type="text" id="nameInput" placeholder="Enter Name (Chandrakala)" onkeydown="handleEnter(event)" autocomplete="off">
            <button class="login-btn" onclick="attemptLogin()">Enter Paradise</button>
            <p id="errorMsg" style="color: #ff6b6b; margin-top: 15px; display: none;">‚ö†Ô∏è Please enter 'Chandrakala'</p>
        </div>
    </div>

    <div id="main-content">
        <header>
            <div class="badge-text">
                APGB RETIREMENT CELEBRATION
            </div>
            <h1 class="hero-title">CHANDRAKALA GARU</h1>
            <p class="hero-subtitle">Our Guardian Angel</p>
            <button onclick="triggerLove()" style="margin-top: 15px; background: var(--gold); border: none; color: #003300; font-weight: bold; padding: 15px 35px; border-radius: 50px; cursor: pointer; font-family: 'Cinzel'; box-shadow: 0 0 30px rgba(255,215,0,0.4);">
                ‚ù§Ô∏è WE LOVE YOU
            </button>

            <div class="scroll-hint" onclick="scrollToTribute()">
                <span class="scroll-text">SCROLL DOWN</span>
                <div class="scroll-icon-wrapper">
                    <span class="scroll-arrow">‚Üì</span>
                </div>
            </div>
        </header>

        <section id="tributeStart" class="tribute-section">
            <h2 class="section-title">A Journey of Pure Love</h2>

            <div class="memory-card card-childhood">
                <div class="memory-title">The Architect of Our Joy</div>
                <p class="memory-text">
                    "Dodamma, you didn't just give us holidays; you gave us magic. From the moment we stepped into your house as kids, you treated us like royalty. 
                    <br><br>
                    You took us to <strong>exhibitions, parks, and fairs</strong>, filling our childhood with laughter and wonder. You loved us all fiercely. You are the reason our childhood memories shine so bright."
                </p>
            </div>

            <div class="memory-card card-parents">
                <div class="memory-title">A Beacon of Duty & Devotion</div>
                <p class="memory-text">
                    "We have watched you in awe. You worked tirelessly at the bank all day, yet you never let that stop you from serving Ammama and Thatha.
                    <br><br>
                    We saw the <strong>sleepless nights</strong> you spent caring for them when they were old and frail. Your sacrifice is a lesson in love that we will carry forever."
                </p>
            </div>

            <div class="memory-card card-soul">
                <div class="memory-title">A Beautiful Soul</div>
                <p class="memory-text">
                    "You are truly a beautiful soul, inside and out. We are the luckiest family in the world to call you ours. 
                    <br><br>
                    Now, as you retire, we want to return just a fraction of the love you poured into us. This is your time to rest, to be pampered, and to know that <strong>you are our hero.</strong>"
                </p>
            </div>
        </section>

        <section class="final-wish-section">
            <h2 style="font-family: 'Cinzel'; font-size: 1.8rem; color: var(--apgb-green); margin-bottom: 30px; line-height: 1.4;">From Lohith & All Family Members</h2>
            
            <div class="gift-btn" onclick="revealMessage()">
                üéÅ OPEN OUR HEARTS
            </div>

            <div id="final-message" class="message-box">
                <h3 style="color: var(--apgb-green); font-family: 'Great Vibes'; font-size: 2.5rem; margin-bottom: 15px;">A Special Request...</h3>
                <p style="font-size: 1.1rem; line-height: 1.7; color: #444; text-align: justify;">
                    "Dearest Dodamma, your spirit has always been full of adventure. But you have run a marathon for this family for decades. Now, we have one loving request: <strong>Please, rest.</strong>
                    <br><br>
                    We know how much you love to travel, but our hearts worry when you go alone. You are too precious to us. Let this retirement be about peaceful mornings, relaxing afternoons, and letting us come to *you*. You deserve the luxury of rest more than anyone we know."
                </p>
            </div>
        </section>

        <footer>
            <p>Made with tears of gratitude and love.</p>
            <p style="margin-top: 5px; opacity: 0.7; font-size: 0.8rem;">¬© 2025 | Lohith's Tribute</p>
        </footer>
    </div>

    <div class="floating-flower" onclick="triggerLove()" title="Click for Love">üå∫</div>

    <audio id="bgMusic">
        <source src="https://www.soundjay.com/human/sounds/applause-01.mp3" type="audio/mpeg">
    </audio>

    <script>
        // --- 1. ENTER KEY HANDLER ---
        function handleEnter(e) { 
            if(e.key === "Enter") attemptLogin(); 
        }

        // --- 2. FAIL-SAFE LOGIN LOGIC ---
        function attemptLogin() {
            const input = document.getElementById('nameInput');
            const loginScreen = document.getElementById('login-screen');
            const mainContent = document.getElementById('main-content');
            const audio = document.getElementById('bgMusic');

            if (input.value.toLowerCase().trim() === "chandrakala") {
                
                audio.play().catch(e => console.log("Audio autoplay prevented by browser:", e));

                loginScreen.style.opacity = '0';
                
                setTimeout(() => {
                    loginScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                    
                    setTimeout(() => {
                        mainContent.style.opacity = '1';
                    }, 50);

                    initFireflies();
                    triggerLove();
                    initScrollObserver();

                }, 1000); 

            } else {
                const card = document.getElementById('loginCard');
                card.classList.add('shake');
                document.getElementById('errorMsg').style.display = 'block';
                setTimeout(() => card.classList.remove('shake'), 500);
            }
        }

        // --- 3. SCROLL LOGIC ---
        function scrollToTribute() {
            document.getElementById('tributeStart').scrollIntoView({ behavior: 'smooth' });
        }

        // --- 4. EFFECTS ---
        function triggerLove() {
            const duration = 5000;
            const end = Date.now() + duration;
            
            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#FFD700', '#FF69B4', '#004d00']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#FFD700', '#FF69B4', '#004d00']
                });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }

        // --- 5. SCROLL OBSERVER ---
        function initScrollObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        confetti({
                            particleCount: 30,
                            spread: 40,
                            origin: { y: 0.8 },
                            colors: ['#FFD700']
                        });
                    }
                });
            }, { threshold: 0.15 });

            document.querySelectorAll('.memory-card').forEach(el => observer.observe(el));
        }

        // --- 6. GIFT REVEAL ---
        function revealMessage() {
            const msg = document.getElementById('final-message');
            if(msg.style.display === 'block') return;

            msg.style.display = 'block';
            msg.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            confetti({
                particleCount: 150,
                spread: 100,
                origin: { y: 0.7 },
                colors: ['#FFD700', '#2e8b57', '#ffffff']
            });
        }

        // --- 7. FIREFLY BACKGROUND ---
        function initFireflies() {
            const canvas = document.getElementById('firefly-canvas');
            const ctx = canvas.getContext('2d');
            let particles = [];
            
            const resize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
            window.addEventListener('resize', resize);
            resize();

            for(let i=0; i<40; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 2,
                    speedY: Math.random() * 0.5 + 0.1,
                    opacity: Math.random()
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = "#FFD700";
                
                particles.forEach(p => {
                    p.y -= p.speedY;
                    if(p.y < 0) p.y = canvas.height;
                    
                    ctx.globalAlpha = p.opacity;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
                    ctx.fill();
                });
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>
